<project name="Mocean Mobile Android SDK Build Helper Script" default="error" basedir=".">

  <description>
    Mocean Mobile Android SDK Build Helper Script
  </description>


  <!-- set global properties for this project/build -->
  <property name="top" location=".." />
  <property name="sdkSrcName" value="Sources" />
  <property name="sampleSrcName" value="Samples" />
  <property name="sdkSrc" location="${top}\${sdkSrcName}" />
  <property name="sampleSrc" location="${top}\${sampleSrcName}" />
  
  <property name="packageBaseName" value="Mocean_Android_SDK" />
  <property name="packageVersionedName" value="${packageBaseName}_${sdkVersion}-${releaseDate}" />
  <property name="tempDir" value="\TEMP" />
  <property name="dest" location="${tempDir}\${packageVersionedName}" />

   <property name="sdkBuildTop" value="${sdkSrcName}\MASTAdView" />
   <property name="sampleBuildTop" value="${sampleSrcName}\API-Sample" />
   
  
  <!-- Error entry point, in case this script is invoked directly (without needed variables) -->
  <target name="error">
	<echo message="Error, do not invoke this script directly, required vairables not set." />
  </target>
  

  <!-- clean temp build areas -->
  <target name="clean">
    <delete dir="${dest}"/>
	<delete file="${tempDir}/{packageVersionedName}.zip" />
  </target>

  
  <!-- package up distribution zip file -->
  <target name="package" depends="clone,tidy,zip">
	<echo message="package target..." />
  </target>
  
  
  <!-- tidy up distribution area by removing intermediate build files, but leave final binaries in place -->
  <target name="tidy" depends="clone">
	<echo message="tidy up (remove intermediate files)..." />
	<!-- delete file="${dest}/" -->
  </target>
  
  
  <!-- clone source into temp area -->
  <target name="clone" depends="clean">
	<echo message="clone target..." />
	
	<!-- copy all source/dependencies to temp working folder, excluding version control files -->
	<!-- and temporary build output files (bin/*, gen/*) and a few other things -->
	<copy toDir="${dest}">
      <fileset dir="${top}">
        <include name="**/*.*" />
        <exclude name="**/.svn" />
		<exclude name="**/ant-scripts/**" />
        <exclude name="**/bin/**" />
		<exclude name="**/gen/**" />
		<exclude name="**/Documentation/*.docx" />
		<exclude name="**/proguard-project.txt" />
		<exclude name="**/build.xml" />
		<exclude name="**/javadoc.xml" />
		<exclude name="**/local.properties" />
      </fileset>
    </copy>
	
	<!-- Now add back in the action binary files for the library and sample app -->
	<copy toDir="${dest}">
      <fileset dir="${top}">
        <include name="**/bin/*.jar" />
		<include name="**/bin/*-debug.apk" />
      </fileset>
    </copy>
  </target>
  
  
  <!-- zip up distribution package -->
  <target name="zip" depends="clone,tidy">
    <echo message="Zip distribution files..." />
	<zip destfile="${tempDir}\${packageVersionedName}.zip"
		 basedir="${tempDir}\${packageVersionedName}"
  />
  </target>
  
</project>
